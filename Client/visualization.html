<html lang="Smth">
<head>
    <title>Embedding Vega-Lite</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="vega_script.js"></script>
    <!--    leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin=""/>
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
    <script src="location_script.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>
<body>
<div id = buttons>
    Pick a cluster: <label for="clusterID"></label><input type="number" id="clusterID"> <br>
    Pick a week: <label for="week"></label><input type="number" id="week"> <br>
    <button id="b1">Something!</button>
    <button id="b2">Temp Name!</button>
</div>
Locations:
<div id="locationmap" class="map"></div>
<div id="clustermap" class="map"></div>
<div id="vis"></div>

<script>
    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: 'database_connection.php',
            dataType: 'json',
            data: {functionname: 'getLocationData'},

            success: function (obj) {
                if( !('error' in obj) ) {
                    visualize_location_of_sensors_and_clusters(obj.result);
                }
                else {
                    console.log(obj.error);
                }
            },
            error: function (xhr, textStatus, errorThrown){
                console.log('STATUS: '+textStatus+'\nERROR THROWN: '+errorThrown);
            }
        });


        $("#b1").click(function(){
            $.ajax({
                type: "GET",
                url: 'database_connection.php',
                dataType: 'json',
                data: {
                    functionname: 'getClusters',
                    weeknumber: document.getElementById("week").value
                },

                success: function (obj) {
                    if( !('error' in obj) ) {

                        // put visualization
                        //visualize_clusters(obj.result);
                        console.log(obj.result);

                    }
                    else {
                        console.log(obj.error);
                    }
                },

                error: function (xhr, textStatus, errorThrown){
                    console.log('STATUS: '+textStatus+'\nERROR THROWN: '+errorThrown);
                }
            });
        });
        $("#b2").click(function(){
            $.ajax({
                type: "GET",
                url: 'database_connection.php',
                dataType: 'json',
                data: {
                    functionname: 'getSpecificCluster',
                    weeknumber: document.getElementById("week").value,
                    sensorID: document.getElementById("clusterID").value
                },

                success: function (obj) {
                    if( !('error' in obj) ) {

                        // put visualization
                        //visualize_clusters(obj.result);
                        console.log(obj.result);

                    }
                    else {
                        console.log(obj.error);
                    }
                },

                error: function (xhr, textStatus, errorThrown){
                    console.log('STATUS: '+textStatus+'\nERROR THROWN: '+errorThrown);
                }
            });
        });
    });

</script>
</body>
</html>